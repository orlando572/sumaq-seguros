pruebas-seguridad/
├─ scripts/
│  ├─ docker-compose.yml
│  ├─ zap.sh
│  ├─ sqlmap.sh
│  ├─ ffuf.sh
│  └─ restore_db.sh
├─ reportes/              # aquí caerán los reports generados
├─ artifacts/             # outputs .txt/.log 
├─ ci.yml                 # workflow 
├─ sample-tests/
│  ├─ unit/ItemServiceTest.java
│  ├─ integration/ItemServiceIntegrationTest.java
│  └─ e2e/ItemE2ETest.java
└─ README_PRUEBAS.md  # instrucciones de uso corto (abajo hay contenido)


Inyección SQL (endpoint /api/items?id=) 
Severidad: ALTA — Recomendación: parametrizar consultas y usar ORM + prepared statements.

Cabeceras de seguridad faltantes (X-Content-Type-Options, X-Frame-Options) 
Severidad: MEDIA — Recomendación: configurar seguridad en Spring Security / servidores.

Usuarios sin control de acceso en endpoints administrativos # El tema de clave sol...
Severidad: ALTA — Recomendación: revisar roles y autorización.

///

/backend-financiera
├─ scripts/
├─ reportes/
├─ sample-tests/unit/
├─ sample-tests/integration/
├─ sample-tests/e2e/
└─ resumen_ejecutivo.md

Los tests unitarios, integración y E2E van en src/test/java/...
Los scripts (restore_db.sh, sqlmap.sh, ffuf.sh, zap.sh) apuntan a los endpoints REST que ya están en backend.
La base de datos que usa tu proyecto es PostgreSQL.

///
/frontend-sumaq-seguros
├─ scripts/
├─ reportes/
├─ sample-tests/unit/
├─ sample-tests/e2e/
└─ resumen_ejecutivo.md

Tests unitarios → Jest / React Testing Library para los componentes React que ya existen.
E2E Cypress para flujos como login, CRUD de seguros, navegación entre componentes.
Seguridad ZAP / Burp puede escanear la app corriendo en localhost:3000 (React) y sus llamadas al backend en localhost:8080.

///
///
RESpal
# Evidencia de Pruebas y Seguridad – SUMAQSEGUROS

## Backend – FINANCIERA
- Reporte ZAP (HTML): {{GITHUB_RELEASE_URL}}/zap_backend.html
- SQL Injection (sqlmap output): {{GITHUB_RELEASE_URL}}/sqlmap_backend.txt
- Fuzzing (ffuf output): {{GITHUB_RELEASE_URL}}/ffuf_backend.json
- Escaneo de dependencias (Snyk backend): {{SNYK_PROJECT_URL}}

## Frontend – SUMAQ-SEGUROS
- Reporte ZAP / Burp (HTML): {{GITHUB_RELEASE_URL}}/zap_frontend.html
- Escaneo de dependencias (Snyk frontend): {{SNYK_PROJECT_URL_FRONTEND}}
- Frontend demo desplegado: {{NETLIFY_URL}}

## Otros artefactos
- Backend demo (ngrok / Render): {{BACKEND_PUBLIC_URL}}
- Presentación / Resumen Ejecutivo (PDF): {{GOOGLE_DRIVE_LINK}}

/////
BACKEND
BASH

RESTOR
#!/usr/bin/env bash
set -e
DB_HOST="${1:-localhost}"
DB_PORT="${2:-5432}"
DB_NAME="${3:-financiera_test}"
DB_USER="${4:-test}"
DB_PASS="${5:-test}"
SCHEMA_FILE="$(dirname "$0")/../schema.sql"
DATA_FILE="$(dirname "$0")/../data.sql"

echo "[*] Restaurando DB ${DB_NAME} en ${DB_HOST}:${DB_PORT}"
PGPASSWORD="$DB_PASS" psql -h "$DB_HOST" -p "$DB_PORT" -U "$DB_USER" -d "$DB_NAME" -f "$SCHEMA_FILE"
PGPASSWORD="$DB_PASS" psql -h "$DB_HOST" -p "$DB_PORT" -U "$DB_USER" -d "$DB_NAME" -f "$DATA_FILE"
echo "[+] DB restaurada"
////

ZAP - con el front end+bchend
#!/usr/bin/env bash
set -e
TARGET="${1:-http://localhost:8080}"
REPORT_DIR="$(dirname "$0")/../reportes"
REPORT_HTML="${REPORT_DIR}/zap_backend_$(date +%Y%m%d_%H%M%S).html"
mkdir -p "$REPORT_DIR"

echo "[*] Iniciando ZAP (local) y escaneando $TARGET"
docker run --rm -d --name zap0 -p 8090:8090 owasp/zap2docker-stable zap.sh -daemon -port 8090 -config api.disablekey=true
sleep 8
docker exec zap0 zap-cli -p 8090 status || true
docker exec zap0 zap-cli -p 8090 spider "$TARGET"
docker exec zap0 zap-cli -p 8090 -v active-scan "$TARGET" || true
docker exec zap0 zap-cli -p 8090 report -o /zap/reports/report.html -f html || true
docker cp zap0:/zap/reports/report.html "$REPORT_HTML" 2>/dev/null || true
docker rm -f zap0 >/dev/null 2>&1 || true
echo "[+] Reporte ZAP: $REPORT_HTML"

**
#!/usr/bin/env bash
set -e
TARGET="${1:-http://localhost:8080}"
REPORT_DIR="$(dirname "$0")/../reportes"
REPORT_HTML="${REPORT_DIR}/zap_backend_$(date +%Y%m%d_%H%M%S).html"
mkdir -p "$REPORT_DIR"

separar con el de pruebas back - deslindar
#eliminar
echo "[*] Iniciando ZAP (local) y escaneando $TARGET"
docker run --rm -d --name zap0 -p 8090:8090 owasp/zap2docker-stable zap.sh -daemon -port 8090 -config api.disablekey=true
sleep 8
docker exec zap0 zap-cli -p 8090 status || true
docker exec zap0 zap-cli -p 8090 spider "$TARGET"
docker exec zap0 zap-cli -p 8090 -v active-scan "$TARGET" || true
docker exec zap0 zap-cli -p 8090 report -o /zap/reports/report.html -f html || true
docker cp zap0:/zap/reports/report.html "$REPORT_HTML" 2>/dev/null || true
docker rm -f zap0 >/dev/null 2>&1 || true
echo "[+] Reporte ZAP: $REPORT_HTML"
